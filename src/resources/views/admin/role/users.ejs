<title>Phân quyền người dùng</title>
<% if(error?.length){ %>
    <label id="error-toast"><%= error %></label>
    <% } %> <% if(success?.length){ %>
    <label id="success-toast"><%= success %></label>
    <% } %>
    
    <form action="" class="mb-2">
      <div class="row">
        <div class="col-10">
          <input
            type="search"
            name="keyword"
            class="form-control"
            placeholder="Từ khóa tìm kiếm..."
            value="<%= req.query.keyword %>"
          />
        </div>
        <div class="col-2 d-grid">
          <button type="submit" class="btn btn-primary">Tìm kiếm</button>
        </div>
      </div>
    </form>
    
    <table class="table table-bordered">
      <% if(users?.length){%>
      <thead>
        <tr>
          <th scope="col">STT</th>
          <th scope="col">Tên</th>  
          <th scope="col">Phân quyền</th>  
        </tr>
        
      </thead>
      <tbody>
        <% users.forEach((user, index) => {%>
        <tr>
          <td><%= ++offset %></td>
          <td><%= user.name %></td>
          <td>
            <a
            href="/admin/manager/role/authorization/users/<%= user.id %>"
            class="btn btn-secondary"
            ><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-lock" viewBox="0 0 16 16">
                <path d="M8 5a1 1 0 0 1 1 1v1H7V6a1 1 0 0 1 1-1m2 2.076V6a2 2 0 1 0-4 0v1.076c-.54.166-1 .597-1 1.224v2.4c0 .816.781 1.3 1.5 1.3h3c.719 0 1.5-.484 1.5-1.3V8.3c0-.627-.46-1.058-1-1.224M6.105 8.125A.64.64 0 0 1 6.5 8h3a.64.64 0 0 1 .395.125c.085.068.105.133.105.175v2.4c0 .042-.02.107-.105.175A.64.64 0 0 1 9.5 11h-3a.64.64 0 0 1-.395-.125C6.02 10.807 6 10.742 6 10.7V8.3c0-.042.02-.107.105-.175"/>
                <path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1"/>
            </svg>
            </a>  
          </td>
        </tr>
        <% }) %>
      </tbody>
    
      <% } %>
    </table>
    <div class="d-flex justify-content-between">
        <div class="col-10 mt-2">
          <a href="/admin/manager/role/authorization" class="btn btn-danger">Quay lại</a>
        </div>
    <% if (totalPage > 1) { %>
    
    <nav class="d-flex justify-content-end mt-2 ml-auto">
      <ul class="pagination">
        <% if (page > 1) { %>
        <li class="page-item">
          <a class="page-link" href="?page=<%= +page - 1 %>">Trước</a>
        </li>
        <% } %> <% for (let i = 1; i <= totalPage; i++) { %>
        <li class="page-item <%= +page === +i ? 'active': '' %>">
          <a class="page-link" href="?<%= getPaginateUrl(req, i) %>"><%= i %></a>
        </li>
        <% } %> <% if (page < totalPage) { %>
        <li class="page-item">
          <a class="page-link" href="?page=<%= +page + 1 %>">Sau</a>
        </li>
        <% } %>
      </ul>
    </nav>
    <% } %>
    </div>